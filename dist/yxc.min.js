"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).yxc={})}(void 0,function(t){function s(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];process.env.YXC_DEBUG&&console.error.apply(console,t)}var n=(r.prototype.test=function(t){return this.custom(t),this},r.prototype.check=function(t){return this.custom(t),this},r.prototype.use=function(t){return this.custom(t),this},r.prototype.rule=function(t){return this.custom(t),this},r.prototype.custom=function(t){return this._rules.push(t),this},r.prototype.validate=function(t,n,r){var e=[];s("Checking rules");for(var o=0,u=this._rules;o<u.length;o++){var i=(0,u[o])(t,n||[],r||t);if("string"==typeof i||!i)return s("Rule failed!"),e.push({key:n||[],message:i}),s("Rule result: "+i),e;s("Rule passed!")}return s("Checked rules, "+e.length+" errors"),e},r);function r(){this._rules=[]}var e,o,l=((e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(u,o=n),u.prototype.nullable=function(){return new y([this,new p])},u);function u(){var t=o.call(this)||this;return t._rules.push(function(t){return void 0===t||"Must be undefined"}),t}var i,c,p=((i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(a,c=n),a.prototype.optional=function(){return new y([this,new l])},a);function a(){var t=c.call(this)||this;return t._rules.push(function(t){return null===t||"Must be null"}),t}var f,h,y=((f=function(t,n){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}f(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(_,h=n),_.prototype.nullable=function(){return new _([this,new p])},_.prototype.optional=function(){return new _([this,new l])},_);function _(t){var n=h.call(this)||this;return n._rules.push(function(n){return!!t.some(function(t){return 0===t.validate(n).length})||"Input is not matching any of the expected schemas"}),n}var v,b,w=((v=function(t,n){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}v(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(d,b=n),d.prototype.nullable=function(){return new y([this,new p])},d.prototype.optional=function(){return new y([this,new l])},d);function d(){return null!==b&&b.apply(this,arguments)||this}var m,g,O=((m=function(t,n){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}m(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(j,g=w),j.prototype.equals=function(n){return this._rules.push(function(t){return t===n||"Must be equal to "+n}),this},j.prototype.eq=function(t){return this.equals(t)},j.prototype.equal=function(t){return this.equals(t)},j.prototype.enum=function(n){return this._rules.push(function(t){return n.includes(t)||"Must be one of the following values: "+n.join(", ")}),this},j);function j(){return null!==g&&g.apply(this,arguments)||this}var x=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;var A,M,P=((A=function(t,n){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}A(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(S,M=O),S.prototype.prefix=function(t){return this.startsWith(t)},S.prototype.suffix=function(t){return this.endsWith(t)},S.prototype.endsWith=function(n){return this._rules.push(function(t){return t.endsWith(n)||"Value has to end with "+n}),this},S.prototype.beginsWith=function(t){return this.startsWith(t)},S.prototype.startsWith=function(n){return this._rules.push(function(t){return t.startsWith(n)||"Value has to start with "+n}),this},S.prototype.email=function(){return this._rules.push(function(t){return t=t,x.test(t)||"Must be a valid email"}),this},S.prototype.numeric=function(){var n=/[^0-9]/;return this._rules.push(function(t){return t.length&&!n.test(t)||"Must be numeric"}),this},S.prototype.alphanum=function(t){var n=t?/[^a-zA-Z0-9 ]/:/[^a-zA-Z0-9]/;return this._rules.push(function(t){return t.length&&!n.test(t)||"Must be alphanumeric"}),this},S.prototype.regex=function(n){return this._rules.push(function(t){return n.test(t)||"Does not match "+n.toString()}),this},S.prototype.match=function(t){return this.regex(t)},S.prototype.pattern=function(t){return this.regex(t)},S.prototype.length=function(n){return this._rules.push(function(t){return t.length===n||"Must be of length "+n}),this},S.prototype.len=function(t){return this.length(t)},S.prototype.notEmpty=function(){return this.min(1)},S.prototype.between=function(t,n){return this.min(t).max(n)},S.prototype.min=function(n){return this._rules.push(function(t){return t.length>=n||"Must be at least "+n+" characters long"}),this},S.prototype.max=function(n){return this._rules.push(function(t){return t.length<=n||"Must have at most "+n+" characters"}),this},S);function S(){var t=M.call(this)||this;return t._rules.push(function(t){return"string"==typeof t||"Must be a string"}),t}function k(t){return"object"===_typeof(t)&&!Array.isArray(t)&&null!==t}var E,C,T=(E=function(t,n){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}E(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Z=function(t,n){for(var r=0,e=n.length,o=t.length;r<e;r++,o++)t[o]=n[r];return t},H=(T(q,C=w),q.prototype.any=function(t){return this.some(t)},q.prototype.all=function(t){return this.every(t)},q.prototype.some=function(r){return this._rules.push(function(n){return Object.keys(n).some(function(t){return r(n[t],t,n)})}),this},q.prototype.every=function(r){return this._rules.push(function(n){return Object.keys(n).every(function(t){return r(n[t],t,n)})}),this},q.prototype.partial=function(){return this._partial=!0,this},q.prototype.arbitrary=function(){return this._arbitrary=!0,this},q.prototype.numKeys=function(n){return this._rules.push(function(t){return Object.keys(t).length===n||"Must have "+n+" keys"}),this},q.prototype.validate=function(t,e,o){void 0===e&&(e=[]);var n=[],u=[];if("object"===_typeof(t)&&null!==t){var i=t;if(!this._arbitrary)for(var r in i)this._keys[r]||u.push({key:Z(Z([],e),[r]),message:"Value not allowed"});var s,c=function(n){function t(t){return t=t.validate(i[n],Z(Z([],e),[n]),o),u.push.apply(u,t),t}var r=p._keys[n];p._partial?t(new y([r,new l])):t(r)},p=this;for(s in this._keys)c(s)}return u.length||(n=C.prototype.validate.call(this,t,e,o)),n.concat(u)},q);function q(t){var n=C.call(this)||this;return n._keys={},n._arbitrary=!1,n._partial=!1,n._rules.push(function(t){return k(t)||"Must be an object"}),t&&(n._keys=t),n}var z,W,N=((z=function(t,n){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}z(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(V,W=O),V.prototype.natural=function(t){return this.integer().positive({withZero:null==t?void 0:t.withZero})},V.prototype.int=function(){return this.integer()},V.prototype.integer=function(){return this._rules.push(function(t){return Number.isInteger(t)||"Must be an integer"}),this},V.prototype.negative=function(t){return null!=t&&t.withZero?this.max(0):this._rules.push(function(t){return t<0||"Must be a negative number"}),this},V.prototype.positive=function(t){return null!=t&&t.withZero?this.min(0):this._rules.push(function(t){return 0<t||"Must be a positive number"}),this},V.prototype.between=function(t,n){return this.min(t).max(n)},V.prototype.min=function(n){return this._rules.push(function(t){return n<=t||"Must be "+n+" or greater"}),this},V.prototype.max=function(n){return this._rules.push(function(t){return t<=n||"Must be less than or equal "+n}),this},V);function V(){var t=W.call(this)||this;return t._rules.push(function(t){return"number"==typeof t&&!isNaN(t)||"Must be a number"}),t}var R,B,D=((R=function(t,n){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}R(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(I,B=O),I.prototype.true=function(){return this.equals(!0)},I.prototype.false=function(){return this.equals(!1)},I);function I(){var t=B.call(this)||this;return t._rules.push(function(t){return"boolean"==typeof t||"Must be a boolean"}),t}function K(t){return Array.isArray(t)||"Must be an array"}var U,$,T=(U=function(t,n){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}U(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),G=function(t,n){for(var r=0,e=n.length,o=t.length;r<e;r++,o++)t[o]=n[r];return t},X=(T(Y,$=w),Y.prototype.any=function(t){return this.some(t)},Y.prototype.all=function(t){return this.every(t)},Y.prototype.some=function(n){return this._rules.push(function(t){return t.some(n)}),this},Y.prototype.every=function(n){return this._rules.push(function(t){return t.every(n)}),this},Y.prototype.length=function(n){return this._rules.push(function(t){return t.length===n||"Must be of length "+n}),this},Y.prototype.len=function(t){return this.length(t),this},Y.prototype.notEmpty=function(){return this._rules.push(function(t){return!!t.length||"Must not be empty"}),this},Y.prototype.between=function(t,n){return this.min(t).max(n)},Y.prototype.min=function(n){return this._rules.push(function(t){return t.length>=n||"Must have at least "+n+" items"}),this},Y.prototype.max=function(n){return this._rules.push(function(t){return t.length<=n||"Must have at most "+n+" items"}),this},Y.prototype.validate=function(t,r,e){var o=this;void 0===r&&(r=[]);var n=[],u=[];return Array.isArray(t)&&t.forEach(function(t,n){n=n.toString(),n=o._handler.validate(t,G(G([],r),[n]),e);u.push.apply(u,n)}),u.length||(n=$.prototype.validate.call(this,t,r,e)),n.concat(u)},Y);function Y(t){var n=$.call(this)||this;return n._rules.push(K),n._handler=t,n}var F,J,L=((F=function(t,n){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}F(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(Q,J=O),Q.prototype.truthy=function(){return this._rules.push(function(t){return!!t||"Value must be truthy"}),this},Q.prototype.falsy=function(){return this._rules.push(function(t){return!t||"Value must be falsy"}),this},Q);function Q(){return J.call(this)||this}var tt,nt,O=(tt=function(t,n){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}tt(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),rt=function(t,n){for(var r=0,e=n.length,o=t.length;r<e;r++,o++)t[o]=n[r];return t},et=(O(ot,nt=w),ot.prototype.any=function(t){return this.some(t)},ot.prototype.all=function(t){return this.every(t)},ot.prototype.some=function(r){return this._rules.push(function(n){return Object.keys(n).some(function(t){return r(n[t],t,n)})}),this},ot.prototype.every=function(r){return this._rules.push(function(n){return Object.keys(n).every(function(t){return r(n[t],t,n)})}),this},ot.prototype.numKeys=function(n){return this._rules.push(function(t){return Object.keys(t).length===n||"Must have "+n+" keys"}),this},ot.prototype.validate=function(t,n,r){void 0===n&&(n=[]);var e=[],o=[];if("object"===_typeof(t)&&null!==t){var u,i=t;for(u in i){var s=this._schema.validate(i[u],rt(rt([],n),[u]),r);o.push.apply(o,s)}}return o.length||(e=nt.prototype.validate.call(this,t,n,r)),e.concat(o)},ot);function ot(t){var n=nt.call(this)||this;return n._rules.push(function(t){return k(t)||"Must be an object"}),n._schema=t,n}function ut(n){return function(t){t=n.validate(t,[],t);return{ok:!t.length,errors:t}}}w={object:function(t){return new H(t)},record:function(t){return new et(t)},string:function(){return new P},number:function(){return new N},boolean:function(){return new D},array:function(t){return new X(t)},any:function(){return new L},union:function(t){return new y(t)},null:function(){return new p},optional:function(){return new l},undefined:function(){return new l}};t.AnyHandler=L,t.ArrayHandler=X,t.BooleanHandler=D,t.Handler=n,t.NullHandler=p,t.NumberHandler=N,t.ObjectHandler=H,t.OptionalHandler=l,t.RecordHandler=et,t.StringHandler=P,t.UnionHandler=y,t.createExecutableSchema=ut,t.createSchema=function(t){return ut(new H(t))},t.default=w,t.is=function(t,n){return ut(n)(t).ok},Object.defineProperty(t,"__esModule",{value:!0})});
