"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).yxc={})}(void 0,function(t){function s(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];process.env.YXC_DEBUG&&console.log.apply(console,t)}var n=(r.prototype.test=function(t){return this.custom(t),this},r.prototype.check=function(t){return this.custom(t),this},r.prototype.use=function(t){return this.custom(t),this},r.prototype.rule=function(t){return this.custom(t),this},r.prototype.custom=function(t){return this._rules.push(t),this},r.prototype.validate=function(t,n,r){var e=[];s("Checking rules");for(var o=0,u=this._rules;o<u.length;o++){var i=(0,u[o])(t,n||[],r||t);if("string"==typeof i||!i)return s("Rule failed!"),e.push({key:n||[],message:i}),s("Rule result: "+i),e;s("Rule passed!")}return s("Checked rules, "+e.length+" errors"),e},r);function r(){this._rules=[]}var e,o,c=((e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(u,o=n),u.prototype.nullable=function(){return new y([this,new a])},u);function u(){var t=o.call(this)||this;return t._rules.push(function(t){return void 0===t||"Must be undefined"}),t}var i,p,a=((i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(f,p=n),f.prototype.optional=function(){return new y([this,new c])},f);function f(){var t=p.call(this)||this;return t._rules.push(function(t){return null===t||"Must be null"}),t}var h,l,y=((h=function(t,n){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}h(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(_,l=n),_.prototype.nullable=function(){return new _([this,new a])},_.prototype.optional=function(){return new _([this,new c])},_);function _(t){var n=l.call(this)||this;return n._rules.push(function(n){return!!t.some(function(t){return 0===t.validate(n).length})||"Input is not matching any of the expected schemas"}),n}var v,b,m=((v=function(t,n){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}v(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(O,b=n),O.prototype.nullable=function(){return new y([this,new a])},O.prototype.optional=function(){return new y([this,new c])},O);function O(){return null!==b&&b.apply(this,arguments)||this}var w,g,d=((w=function(t,n){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}w(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(j,g=m),j.prototype.equals=function(n){return this._rules.push(function(t){return t===n||"Must be equal to "+n}),this},j.prototype.eq=function(t){return this.equals(t)},j.prototype.equal=function(t){return this.equals(t)},j.prototype.enum=function(n){return this._rules.push(function(t){return n.includes(t)||"Must be one of the following values: "+n.join(", ")}),this},j);function j(){return null!==g&&g.apply(this,arguments)||this}var A=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;var M,P,k=((M=function(t,n){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}M(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(x,P=d),x.prototype.prefix=function(t){return this.startsWith(t)},x.prototype.suffix=function(t){return this.endsWith(t)},x.prototype.endsWith=function(n){return this._rules.push(function(t){return t.endsWith(n)||"Value has to end with "+n}),this},x.prototype.beginsWith=function(t){return this.startsWith(t)},x.prototype.startsWith=function(n){return this._rules.push(function(t){return t.startsWith(n)||"Value has to start with "+n}),this},x.prototype.email=function(){return this._rules.push(function(t){return n=t,A.test(n)||"Must be a valid email";var n}),this},x.prototype.numeric=function(){var n=/[^0-9]/;return this._rules.push(function(t){return t.length&&!n.test(t)||"Must be numeric"}),this},x.prototype.alphanum=function(t){var n=t?/[^a-zA-Z0-9 ]/:/[^a-zA-Z0-9]/;return this._rules.push(function(t){return t.length&&!n.test(t)||"Must be alphanumeric"}),this},x.prototype.regex=function(n){return this._rules.push(function(t){return n.test(t)||"Does not match "+n.toString()}),this},x.prototype.match=function(t){return this.regex(t)},x.prototype.pattern=function(t){return this.regex(t)},x.prototype.length=function(n){return this._rules.push(function(t){return t.length===n||"Must be of length "+n}),this},x.prototype.len=function(t){return this.length(t)},x.prototype.notEmpty=function(){return this.min(1)},x.prototype.between=function(t,n){return this.min(t).max(n)},x.prototype.min=function(n){return this._rules.push(function(t){return t.length>=n||"Must be at least "+n+" characters long"}),this},x.prototype.max=function(n){return this._rules.push(function(t){return t.length<=n||"Must have at most "+n+" characters"}),this},x);function x(){var t=P.call(this)||this;return t._rules.push(function(t){return"string"==typeof t||"Must be a string"}),t}function Z(t){return"object"===_typeof(t)&&!Array.isArray(t)&&null!==t}var q,z,S=(q=function(t,n){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}q(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),W=function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),o=0,n=0;n<r;n++)for(var u=arguments[n],i=0,s=u.length;i<s;i++,o++)e[o]=u[i];return e},E=(S(V,z=m),V.prototype.any=function(t){return this.some(t)},V.prototype.all=function(t){return this.every(t)},V.prototype.some=function(r){return this._rules.push(function(n){return Object.keys(n).some(function(t){return r(n[t],t,n)})}),this},V.prototype.every=function(r){return this._rules.push(function(n){return Object.keys(n).every(function(t){return r(n[t],t,n)})}),this},V.prototype.partial=function(){return this._partial=!0,this},V.prototype.arbitrary=function(){return this._arbitrary=!0,this},V.prototype.numKeys=function(n){return this._rules.push(function(t){return Object.keys(t).length===n||"Must have "+n+" keys"}),this},V.prototype.validate=function(t,e,o){void 0===e&&(e=[]);var n=z.prototype.validate.call(this,t,e,o),u=[];if("object"===_typeof(t)&&null!==t){var i=t;if(!this._arbitrary)for(var r in i){this._keys[r]||u.push({key:W(e,[r]),message:"Value not allowed"})}var s,p=this;for(s in this._keys)!function(r){function t(t){var n=t.validate(i[r],W(e,[r]),o);return u.push.apply(u,n),n}var n=p._keys[r];p._partial?t(new y([n,new c])):t(n)}(s)}return n.concat(u)},V);function V(t){var n=z.call(this)||this;return n._keys={},n._arbitrary=!1,n._partial=!1,n._rules.push(function(t){return Z(t)||"Must be an object"}),t&&(n._keys=t),n}var C,N,R=((C=function(t,n){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}C(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(D,N=d),D.prototype.natural=function(t){return this.integer().positive({withZero:null==t?void 0:t.withZero})},D.prototype.int=function(){return this.integer()},D.prototype.integer=function(){return this._rules.push(function(t){return Number.isInteger(t)||"Must be an integer"}),this},D.prototype.negative=function(t){return null!=t&&t.withZero?this.max(0):this._rules.push(function(t){return t<0||"Must be a negative number"}),this},D.prototype.positive=function(t){return null!=t&&t.withZero?this.min(0):this._rules.push(function(t){return 0<t||"Must be a positive number"}),this},D.prototype.between=function(t,n){return this.min(t).max(n)},D.prototype.min=function(n){return this._rules.push(function(t){return n<=t||"Must be "+n+" or greater"}),this},D.prototype.max=function(n){return this._rules.push(function(t){return t<=n||"Must be less than or equal "+n}),this},D);function D(){var t=N.call(this)||this;return t._rules.push(function(t){return"number"==typeof t&&!isNaN(t)||"Must be a number"}),t}var I,K,T=((I=function(t,n){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}I(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})($,K=d),$.prototype.true=function(){return this.equals(!0)},$.prototype.false=function(){return this.equals(!1)},$);function $(){var t=K.call(this)||this;return t._rules.push(function(t){return"boolean"==typeof t||"Must be a boolean"}),t}var B,G,U=(B=function(t,n){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}B(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),X=function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),o=0,n=0;n<r;n++)for(var u=arguments[n],i=0,s=u.length;i<s;i++,o++)e[o]=u[i];return e},Y=(U(F,G=m),F.prototype.any=function(t){return this.some(t)},F.prototype.all=function(t){return this.every(t)},F.prototype.some=function(n){return this._rules.push(function(t){return t.some(n)}),this},F.prototype.every=function(n){return this._rules.push(function(t){return t.every(n)}),this},F.prototype.length=function(n){return this._rules.push(function(t){return t.length===n||"Must be of length "+n}),this},F.prototype.len=function(t){return this.length(t),this},F.prototype.notEmpty=function(){return this._rules.push(function(t){return!!t.length||"Must not be empty"}),this},F.prototype.between=function(t,n){return this.min(t).max(n)},F.prototype.min=function(n){return this._rules.push(function(t){return t.length>=n||"Must have at least "+n+" items"}),this},F.prototype.max=function(n){return this._rules.push(function(t){return t.length<=n||"Must have at most "+n+" items"}),this},F.prototype.validate=function(t,o,u){var i=this;void 0===o&&(o=[]);var n=G.prototype.validate.call(this,t,o,u),s=[];return Array.isArray(t)&&t.forEach(function(t,n){var r=n.toString(),e=i._handler.validate(t,X(o,[r]),u);s.push.apply(s,e)}),n.concat(s)},F);function F(t){var n=G.call(this)||this;return n._rules.push(function(t){return Array.isArray(t)||"Must be an array"}),n._handler=t,n}var H,J,L=((H=function(t,n){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}H(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(Q,J=d),Q.prototype.truthy=function(){return this._rules.push(function(t){return!!t||"Value must be truthy"}),this},Q.prototype.falsy=function(){return this._rules.push(function(t){return!t||"Value must be falsy"}),this},Q);function Q(){return J.call(this)||this}var tt,nt,rt=(tt=function(t,n){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}tt(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),et=function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),o=0,n=0;n<r;n++)for(var u=arguments[n],i=0,s=u.length;i<s;i++,o++)e[o]=u[i];return e},ot=(rt(ut,nt=m),ut.prototype.any=function(t){return this.some(t)},ut.prototype.all=function(t){return this.every(t)},ut.prototype.some=function(r){return this._rules.push(function(n){return Object.keys(n).some(function(t){return r(n[t],t,n)})}),this},ut.prototype.every=function(r){return this._rules.push(function(n){return Object.keys(n).every(function(t){return r(n[t],t,n)})}),this},ut.prototype.numKeys=function(n){return this._rules.push(function(t){return Object.keys(t).length===n||"Must have "+n+" keys"}),this},ut.prototype.validate=function(t,n,r){void 0===n&&(n=[]);var e=nt.prototype.validate.call(this,t,n,r),o=[];if("object"===_typeof(t)){var u,i=t;for(u in i){var s=this._schema.validate(i[u],et(n,[u]),r);o.push.apply(o,s)}}return e.concat(o)},ut);function ut(t){var n=nt.call(this)||this;return n._rules.push(function(t){return Z(t)||"Must be an object"}),n._schema=t,n}function it(r){return function(t){var n=r.validate(t,[],t);return{ok:!n.length,errors:n}}}var st={object:function(t){return new E(t)},record:function(t){return new ot(t)},string:function(){return new k},number:function(){return new R},boolean:function(){return new T},array:function(t){return new Y(t)},any:function(){return new L},union:function(t){return new y(t)},null:function(){return new a},optional:function(){return new c},undefined:function(){return new c}};t.createExecutableSchema=it,t.createSchema=function(t){return it(new E(t))},t.default=st,t.is=function(t,n){return it(n)(t).ok},Object.defineProperty(t,"__esModule",{value:!0})});
