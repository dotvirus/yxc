"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).yxc={})}(void 0,function(t){function s(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];process.env.YXC_DEBUG&&console.log.apply(console,t)}var n=(r.prototype.test=function(t){return this.custom(t),this},r.prototype.check=function(t){return this.custom(t),this},r.prototype.use=function(t){return this.custom(t),this},r.prototype.rule=function(t){return this.custom(t),this},r.prototype.custom=function(t){return this._rules.push(t),this},r.prototype.validate=function(t,n,r){var e=[];s("Checking rules");for(var o=0,u=this._rules;o<u.length;o++){var i=(0,u[o])(t,n||[],r||t);if("string"==typeof i||!i)return s("Rule failed!"),e.push({key:n||[],message:i}),s("Rule result: "+i),e;s("Rule passed!")}return s("Checked rules, "+e.length+" errors"),e},r);function r(){this._rules=[]}var e,o,a=((e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(u,o=n),u.prototype.nullable=function(){return new y([this,new c])},u);function u(){var t=o.call(this)||this;return t._rules.push(function(t){return void 0===t||"Must be undefined"}),t}var i,p,c=((i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(f,p=n),f.prototype.optional=function(){return new y([this,new a])},f);function f(){var t=p.call(this)||this;return t._rules.push(function(t){return null===t||"Must be null"}),t}var l,h,y=((l=function(t,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}l(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(_,h=n),_.prototype.nullable=function(){return new _([this,new c])},_.prototype.optional=function(){return new _([this,new a])},_);function _(t){var n=h.call(this)||this;return n._rules.push(function(n){return!!t.some(function(t){return 0===t.validate(n).length})||"Input is not matching any of the expected schemas"}),n}var b,v,m=((b=function(t,n){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}b(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(O,v=n),O.prototype.nullable=function(){return new y([this,new c])},O.prototype.optional=function(){return new y([this,new a])},O);function O(){return null!==v&&v.apply(this,arguments)||this}var d,w,g=((d=function(t,n){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}d(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(j,w=m),j.prototype.equals=function(n){return this._rules.push(function(t){return t===n||"Must be equal to "+n}),this},j.prototype.eq=function(t){return this.equals(t)},j.prototype.equal=function(t){return this.equals(t)},j.prototype.enum=function(n){return this._rules.push(function(t){return n.includes(t)||"Must be one of the following values: "+n.join(", ")}),this},j);function j(){return null!==w&&w.apply(this,arguments)||this}var A=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;var M,P,k=((M=function(t,n){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}M(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(x,P=g),x.prototype.prefix=function(t){return this.startsWith(t)},x.prototype.suffix=function(t){return this.endsWith(t)},x.prototype.endsWith=function(n){return this._rules.push(function(t){return t.endsWith(n)||"Value has to end with "+n}),this},x.prototype.beginsWith=function(t){return this.startsWith(t)},x.prototype.startsWith=function(n){return this._rules.push(function(t){return t.startsWith(n)||"Value has to start with "+n}),this},x.prototype.email=function(){return this._rules.push(function(t){return t=t,A.test(t)||"Must be a valid email"}),this},x.prototype.numeric=function(){var n=/[^0-9]/;return this._rules.push(function(t){return t.length&&!n.test(t)||"Must be numeric"}),this},x.prototype.alphanum=function(t){var n=t?/[^a-zA-Z0-9 ]/:/[^a-zA-Z0-9]/;return this._rules.push(function(t){return t.length&&!n.test(t)||"Must be alphanumeric"}),this},x.prototype.regex=function(n){return this._rules.push(function(t){return n.test(t)||"Does not match "+n.toString()}),this},x.prototype.match=function(t){return this.regex(t)},x.prototype.pattern=function(t){return this.regex(t)},x.prototype.length=function(n){return this._rules.push(function(t){return t.length===n||"Must be of length "+n}),this},x.prototype.len=function(t){return this.length(t)},x.prototype.notEmpty=function(){return this.min(1)},x.prototype.between=function(t,n){return this.min(t).max(n)},x.prototype.min=function(n){return this._rules.push(function(t){return t.length>=n||"Must be at least "+n+" characters long"}),this},x.prototype.max=function(n){return this._rules.push(function(t){return t.length<=n||"Must have at most "+n+" characters"}),this},x);function x(){var t=P.call(this)||this;return t._rules.push(function(t){return"string"==typeof t||"Must be a string"}),t}function Z(t){return"object"===_typeof(t)&&!Array.isArray(t)&&null!==t}var H,S,q=(H=function(t,n){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}H(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),z=function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),o=0,n=0;n<r;n++)for(var u=arguments[n],i=0,s=u.length;i<s;i++,o++)e[o]=u[i];return e},W=(q(E,S=m),E.prototype.any=function(t){return this.some(t)},E.prototype.all=function(t){return this.every(t)},E.prototype.some=function(r){return this._rules.push(function(n){return Object.keys(n).some(function(t){return r(n[t],t,n)})}),this},E.prototype.every=function(r){return this._rules.push(function(n){return Object.keys(n).every(function(t){return r(n[t],t,n)})}),this},E.prototype.partial=function(){return this._partial=!0,this},E.prototype.arbitrary=function(){return this._arbitrary=!0,this},E.prototype.numKeys=function(n){return this._rules.push(function(t){return Object.keys(t).length===n||"Must have "+n+" keys"}),this},E.prototype.validate=function(t,e,o){void 0===e&&(e=[]);var n=S.prototype.validate.call(this,t,e,o),u=[];if("object"===_typeof(t)&&null!==t){var i=t;if(!this._arbitrary)for(var r in i)this._keys[r]||u.push({key:z(e,[r]),message:"Value not allowed"});var s,p=function(n){function t(t){return t=t.validate(i[n],z(e,[n]),o),u.push.apply(u,t),t}var r=c._keys[n];c._partial?t(new y([r,new a])):t(r)},c=this;for(s in this._keys)p(s)}return n.concat(u)},E);function E(t){var n=S.call(this)||this;return n._keys={},n._arbitrary=!1,n._partial=!1,n._rules.push(function(t){return Z(t)||"Must be an object"}),t&&(n._keys=t),n}var N,V,R=((N=function(t,n){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}N(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(C,V=g),C.prototype.natural=function(t){return this.integer().positive({withZero:null==t?void 0:t.withZero})},C.prototype.int=function(){return this.integer()},C.prototype.integer=function(){return this._rules.push(function(t){return Number.isInteger(t)||"Must be an integer"}),this},C.prototype.negative=function(t){return null!=t&&t.withZero?this.max(0):this._rules.push(function(t){return t<0||"Must be a negative number"}),this},C.prototype.positive=function(t){return null!=t&&t.withZero?this.min(0):this._rules.push(function(t){return 0<t||"Must be a positive number"}),this},C.prototype.between=function(t,n){return this.min(t).max(n)},C.prototype.min=function(n){return this._rules.push(function(t){return n<=t||"Must be "+n+" or greater"}),this},C.prototype.max=function(n){return this._rules.push(function(t){return t<=n||"Must be less than or equal "+n}),this},C);function C(){var t=V.call(this)||this;return t._rules.push(function(t){return"number"==typeof t&&!isNaN(t)||"Must be a number"}),t}var B,D,I=((B=function(t,n){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}B(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(K,D=g),K.prototype.true=function(){return this.equals(!0)},K.prototype.false=function(){return this.equals(!1)},K);function K(){var t=D.call(this)||this;return t._rules.push(function(t){return"boolean"==typeof t||"Must be a boolean"}),t}var T,U,q=(T=function(t,n){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}T(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),$=function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),o=0,n=0;n<r;n++)for(var u=arguments[n],i=0,s=u.length;i<s;i++,o++)e[o]=u[i];return e},G=(q(X,U=m),X.prototype.any=function(t){return this.some(t)},X.prototype.all=function(t){return this.every(t)},X.prototype.some=function(n){return this._rules.push(function(t){return t.some(n)}),this},X.prototype.every=function(n){return this._rules.push(function(t){return t.every(n)}),this},X.prototype.length=function(n){return this._rules.push(function(t){return t.length===n||"Must be of length "+n}),this},X.prototype.len=function(t){return this.length(t),this},X.prototype.notEmpty=function(){return this._rules.push(function(t){return!!t.length||"Must not be empty"}),this},X.prototype.between=function(t,n){return this.min(t).max(n)},X.prototype.min=function(n){return this._rules.push(function(t){return t.length>=n||"Must have at least "+n+" items"}),this},X.prototype.max=function(n){return this._rules.push(function(t){return t.length<=n||"Must have at most "+n+" items"}),this},X.prototype.validate=function(t,r,e){var o=this;void 0===r&&(r=[]);var n=U.prototype.validate.call(this,t,r,e),u=[];return Array.isArray(t)&&t.forEach(function(t,n){n=n.toString(),n=o._handler.validate(t,$(r,[n]),e);u.push.apply(u,n)}),n.concat(u)},X);function X(t){var n=U.call(this)||this;return n._rules.push(function(t){return Array.isArray(t)||"Must be an array"}),n._handler=t,n}var Y,F,J=((Y=function(t,n){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}Y(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})(L,F=g),L.prototype.truthy=function(){return this._rules.push(function(t){return!!t||"Value must be truthy"}),this},L.prototype.falsy=function(){return this._rules.push(function(t){return!t||"Value must be falsy"}),this},L);function L(){return F.call(this)||this}var Q,tt,g=(Q=function(t,n){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}Q(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),nt=function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),o=0,n=0;n<r;n++)for(var u=arguments[n],i=0,s=u.length;i<s;i++,o++)e[o]=u[i];return e},rt=(g(et,tt=m),et.prototype.any=function(t){return this.some(t)},et.prototype.all=function(t){return this.every(t)},et.prototype.some=function(r){return this._rules.push(function(n){return Object.keys(n).some(function(t){return r(n[t],t,n)})}),this},et.prototype.every=function(r){return this._rules.push(function(n){return Object.keys(n).every(function(t){return r(n[t],t,n)})}),this},et.prototype.numKeys=function(n){return this._rules.push(function(t){return Object.keys(t).length===n||"Must have "+n+" keys"}),this},et.prototype.validate=function(t,n,r){void 0===n&&(n=[]);var e=tt.prototype.validate.call(this,t,n,r),o=[];if("object"===_typeof(t)){var u,i=t;for(u in i){var s=this._schema.validate(i[u],nt(n,[u]),r);o.push.apply(o,s)}}return e.concat(o)},et);function et(t){var n=tt.call(this)||this;return n._rules.push(function(t){return Z(t)||"Must be an object"}),n._schema=t,n}function ot(n){return function(t){t=n.validate(t,[],t);return{ok:!t.length,errors:t}}}m={object:function(t){return new W(t)},record:function(t){return new rt(t)},string:function(){return new k},number:function(){return new R},boolean:function(){return new I},array:function(t){return new G(t)},any:function(){return new J},union:function(t){return new y(t)},null:function(){return new c},optional:function(){return new a},undefined:function(){return new a}};t.AnyHandler=J,t.ArrayHandler=G,t.BooleanHandler=I,t.Handler=n,t.NullHandler=c,t.NumberHandler=R,t.ObjectHandler=W,t.OptionalHandler=a,t.RecordHandler=rt,t.StringHandler=k,t.UnionHandler=y,t.createExecutableSchema=ot,t.createSchema=function(t){return ot(new W(t))},t.default=m,t.is=function(t,n){return ot(n)(t).ok},Object.defineProperty(t,"__esModule",{value:!0})});
